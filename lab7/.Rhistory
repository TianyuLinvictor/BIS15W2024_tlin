knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(skimr)
install.packages("skimr")
library("skimr")
library(tidyverse)
library(janitor)
library(skimr)
fisheries <- readr::read_csv(file = "data/FAO_1950to2012_111914.csv")
clearname(fisheries)
cleanname(fisheries)
clean_names(fisheries)
clean_names(fisheries)
fisheries$country <- as.data(fisheries$country)
fisheries$country <- as.factor(fisheries$country)
clean_names(fisheries)
fisheries$country <- as.factor(fisheries$country)
library(tidyverse)
library(janitor)
library(skimr)
clean_names(fisheries)
fisheries$country <- as.factor(fisheries$country)
clean_names(fisheries)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
View(fisheries)
fisheries<-clean_names(fisheries)
fisheries$country <- as.factor(fisheries$country)
fisheries$isscaap_group_number <- as.factor(fisheries$isscaap_group_number)
fisheries$asfis_species_number <- as.factor(fisheries$asfis_species_number)
fisheries$fao_major_fishing_area <- as.factor(fisheries$fao_major_fishing_area)
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
View(fisheries_tidy)
fisheries_tidy %>%
count(countries, sort = T)
fisheries_tidy %>%
count(country, sort = T)
fisheries_tidy %>%
count(country)
new_fisheries_tidy<-fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
new_fisheries_tidy<-fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
new_fisheries_tidy
View(new_fisheries_tidy)
new_fisheries_tidy%>%
summarize(n_species=n_distinct(asfis_species_number))
new_fisheries_tidy%>%
summarize(n_species=n_distinct(asfis_species_number))
new_fisheries_tidy %>%
count(asfis_species_number)
new_fisheries_tidy%>%
filter(year=2000)%>%
arrange(desc(catch)))
new_fisheries_tidy%>%
filter(year=2000)%>%
arrange(desc(catch))
new_fisheries_tidy%>%
filter(year==2000)%>%
arrange(desc(catch))
new_fisheries_tidy%>%
summarize(n_species=n_distinct(asfis_species_number))
View(new_fisheries_tidy)
new_fisheries_tidy%>%
filter(between(year,1990,2000),asfis_species_name=="Sardina pilchardus")%>%
arrange(desc(catch))
new_fisheries_tidy%>%
filter(between(year,1990,2000))%>%
group_by(country)%>%
summarize(sum(catch))%>%
arrange(desc(catch))
fisheries_tidy <- fisheries %>%
pivot_longer(-c(country,common_name,isscaap_group_number,isscaap_taxonomic_group,asfis_species_number,asfis_species_name,fao_major_fishing_area,measure),
names_to = "year",
values_to = "catch",
values_drop_na = TRUE) %>%
mutate(year= as.numeric(str_replace(year, 'x', ''))) %>%
mutate(catch= str_replace(catch, c(' F'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('...'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('-'), replacement = '')) %>%
mutate(catch= str_replace(catch, c('0 0'), replacement = ''))
fisheries_tidy$catch <- as.numeric(fisheries_tidy$catch)
new_fisheries_tidy%>%
filter(between(year,1990,2000))%>%
group_by(country)%>%
summarize(sum(catch))%>%
arrange(desc(catch))
new_fisheries_tidy%>%
filter(between(year,1990,2000))%>%
group_by(country)%>%
summarize(sum(catch))
new_fisheries_tidy%>%
filter(between(year,1990,2000))%>%
group_by(country)%>%
summarize(total<-sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,1990,2000))%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,1990,2000),asfis_species_name=="Sardina pilchardus")%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012),asfis_species_name=="cephalopodsa")%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012),asfis_species_name=="cephalopodsa")%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012),asfis_species_name=="Cephalopodsa")%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012),asfis_species_name=="Cephalopoda")%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012))%>%
group_by(asfis_species_name)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012),country=="China"%>%
group_by(asfis_species_name)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012)),country=="China"%>%
new_fisheries_tidy%>%
filter(between(year,2008,2012),country=="China")%>%
group_by(asfis_species_name)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
knitr::opts_chunk$set(echo = TRUE)
new_fisheries_tidy%>%
filter(year==2000)%>%
arrange(desc(catch))
library(tidyverse)
library(janitor)
library(skimr)
new_fisheries_tidy%>%
filter(year==2000)%>%
arrange(desc(catch))
new_fisheries_tidy%>%
filter(year==2000)%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(year==2000)%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
summarize(n_species=n_distinct(asfis_species_number))
fisheries_tidy %>%
count(country)
new_fisheries_tidy%>%
summarize(n_species=n_distinct(asfis_species_number))
new_fisheries_tidy%>%
filter(between(year,1990,2000),asfis_species_name=="Sardina pilchardus")%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012),asfis_species_name=="Cephalopoda")%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012))%>%
group_by(asfis_species_name)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,2008,2012),country=="China")%>%
group_by(asfis_species_name)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
fisheries_tidy %>%
count(country)
new_fisheries_tidy<-fisheries_tidy %>%
select(country, isscaap_taxonomic_group, asfis_species_name, asfis_species_number, year, catch)
new_fisheries_tidy
new_fisheries_tidy%>%
summarize(n_species=n_distinct(asfis_species_number))
new_fisheries_tidy%>%
filter(year==2000)%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
new_fisheries_tidy%>%
filter(between(year,1990,2000),asfis_species_name=="Sardina pilchardus")%>%
group_by(country)%>%
summarize(total=sum(catch))%>%
arrange(desc(total))
